class MenuView {
  menuEl = document.querySelector(".menu");
  fieldEl = document.querySelector(".menu-field");
  inputEl = document.getElementById("player_name");

  startBtn = document.getElementById("btn-start-game");

  menuErrorEl;

  constructor() {
    this.renderIcon();
    this.inputEl.focus();
    this.onChangeInput();
    this.menuErrorEl = this.renderMenuError();
  }

  onClickStartButton(callback) {
    this.startBtn.addEventListener("click", () => {
      callback(this.inputEl.value);
    });
  }

  showError() {
    if (!document.contains(this.menuErrorEl))
      this.fieldEl.insertAdjacentElement("afterbegin", this.menuErrorEl);
  }

  renderMenuError() {
    const div = document.createElement("div");
    div.className = "menu-error";
    div.textContent = "Ups! You forgot a name!";

    return div;
  }

  hideStartMenu() {
    this.menuEl.classList.remove("show");
  }

  renderIcon() {
    const svg = `<svg
    id="target-icon"
    width="100%"
    height="100%"
    viewBox="0 0 144.49777 144.49777"
    version="1.1"
    xml:space="preserve"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:svg="http://www.w3.org/2000/svg"
  >
    <defs  />
    <g transform="translate(-39.405251,-42.475737)">
      <path
        style="fill: #ffffff"
        d="m 107.4208,182.50197 v -4.46954 l -3.09572,-0.33576 C 93.180727,176.48996 82.443156,172.13145 72.989692,164.97927 69.906106,162.64633 63.73243,156.47266 61.39949,153.38907 54.24731,143.93561 49.888807,133.19804 48.680096,122.05368 l -0.33576,-3.09572 h -4.469543 -4.469544 v -4.23333 -4.23334 h 4.469544 4.469543 l 0.33576,-3.09572 C 49.888807,96.251219 54.24731,85.513649 61.39949,76.060179 63.73243,72.976599 69.906106,66.802919 72.989692,64.46998 82.443156,57.3178 93.180727,52.959297 104.32508,51.750587 l 3.09572,-0.335761 V 46.945283 42.47574 h 4.23334 4.23333 v 4.469543 4.469543 l 3.09572,0.335761 c 11.14436,1.20871 21.88193,5.567213 31.33539,12.719393 3.08359,2.332939 9.25726,8.506619 11.5902,11.590199 7.15218,9.45347 11.51069,20.19104 12.7194,31.335391 l 0.33576,3.09572 h 4.46954 4.46954 v 4.23334 4.23333 h -4.46954 -4.46954 l -0.33576,3.09572 c -1.20871,11.14436 -5.56722,21.88193 -12.7194,31.33539 -2.33294,3.08359 -8.50661,9.25726 -11.5902,11.5902 -9.45346,7.15218 -20.19103,11.51069 -31.33539,12.7194 l -3.09572,0.33576 v 4.46954 4.46954 h -4.23333 -4.23334 z m 0,-21.45904 v -8.43081 l -2.61055,-0.47546 c -5.107111,-0.93014 -10.414911,-3.13189 -14.855333,-6.16218 -2.759223,-1.88299 -7.669647,-6.79341 -9.552634,-9.55264 -3.030294,-4.44042 -5.232039,-9.74822 -6.162185,-14.85532 l -0.475455,-2.61056 h -8.467274 -8.467275 l 0.200078,2.04611 c 1.875512,19.18009 15.433142,37.10356 33.73952,44.60435 4.769001,1.95403 11.774188,3.67246 15.592778,3.82503 l 1.05833,0.0423 z m 15.19644,7.56248 c 21.59591,-4.43051 38.48917,-21.32377 42.91968,-42.91968 0.29761,-1.45065 0.63114,-3.5583 0.74118,-4.68366 l 0.20008,-2.04611 h -8.46728 -8.46727 l -0.47546,2.61056 c -0.93014,5.1071 -3.13189,10.4149 -6.16218,14.85532 -1.88299,2.75923 -6.79341,7.66965 -9.55263,9.55264 -4.44043,3.03029 -9.74823,5.23204 -14.85533,6.16218 l -2.61056,0.47546 v 8.46727 8.46728 l 2.04611,-0.20008 c 1.12536,-0.11004 3.23301,-0.44358 4.68366,-0.74118 z m -15.19644,-28.6239 v -4.09222 h 4.23334 4.23333 v 4.10501 4.10501 l 1.05833,-0.18387 c 0.58209,-0.10112 2.4296,-0.6323 4.10558,-1.18038 8.76437,-2.86616 15.74904,-9.85082 18.61519,-18.61519 0.54808,-1.67598 1.07926,-3.52349 1.18039,-4.10558 l 0.18386,-1.05833 h -4.10501 -4.10501 v -4.23333 -4.23334 h 4.10501 4.10501 l -0.18386,-1.05833 c -0.10113,-0.58208 -0.63231,-2.42959 -1.18039,-4.10558 -2.86615,-8.764361 -9.85082,-15.749031 -18.61519,-18.615181 -1.67598,-0.54809 -3.52349,-1.07926 -4.10558,-1.18039 l -1.05833,-0.18387 v 4.10501 4.10501 h -4.23333 -4.23334 v -4.10501 -4.10501 l -1.05833,0.18387 c -0.58208,0.10113 -2.42959,0.6323 -4.10558,1.18039 -8.764364,2.86615 -15.749033,9.85082 -18.615184,18.615181 -0.548086,1.67599 -1.079261,3.5235 -1.180389,4.10558 l -0.183868,1.05833 h 4.10501 4.105011 v 4.23334 4.23333 h -4.105011 -4.10501 l 0.183868,1.05833 c 0.702151,4.04152 3.227214,9.53426 6.087111,13.24122 2.702061,3.50237 7.763152,7.26059 11.957512,8.87929 2.11735,0.81713 5.77302,1.88864 6.56209,1.9234 0.26671,0.0118 0.35277,-0.98277 0.35277,-4.07669 z m 1.72391,-12.86414 c -6.41043,-1.25893 -11.025709,-7.85841 -9.966399,-14.25114 0.917429,-5.53649 5.082939,-9.702 10.619429,-10.61943 8.16074,-1.35228 15.6845,6.17148 14.33222,14.33223 -1.1916,7.19108 -7.92341,11.92521 -14.98525,10.53834 z M 74.240098,107.88074 c 0.930146,-5.10711 3.131891,-10.414911 6.162185,-14.855331 1.882987,-2.75923 6.793411,-7.66965 9.552634,-9.55264 4.440422,-3.03029 9.748222,-5.23203 14.855333,-6.16218 l 2.61055,-0.47546 v -8.46727 -8.467274 l -2.04611,0.200077 C 95.854778,61.03156 85.544849,65.286076 77.697738,71.521889 66.091959,80.744579 58.394076,94.497099 57.030172,108.44518 l -0.200078,2.04611 h 8.467275 8.467274 z m 92.038002,0.56444 C 164.9142,94.497099 157.21631,80.744579 145.61054,71.521889 137.76342,65.286076 127.45349,61.03156 117.93358,60.100662 l -2.04611,-0.200077 v 8.467274 8.46727 l 2.61056,0.47546 c 5.1071,0.93015 10.4149,3.13189 14.85533,6.16218 2.75922,1.88299 7.66964,6.79341 9.55263,9.55264 3.03029,4.44042 5.23204,9.748221 6.16218,14.855331 l 0.47546,2.61055 h 8.46727 8.46728 z"
      />
    </g>
  </svg>`;

    this.menuEl.insertAdjacentHTML("beforeend", svg);
  }

  onChangeInput() {
    this.inputEl.addEventListener("input", (e) => {
      if (e.target.value && document.contains(this.menuErrorEl))
        this.fieldEl.removeChild(this.menuErrorEl);
    });
  }
}

export default MenuView;
